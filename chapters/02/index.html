<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Plunker</title>
  <script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

  <script src="https://unpkg.com/redux@3.7.2/dist/redux.js"></script>
  <script src="https://unpkg.com/react-redux@5.0.6/dist/react-redux.js"></script>

</head>
<body>
  <div id='root'></div>
  <script type="text/jsx" src="components/AddTodo.jsx"></script>
  <script type="text/jsx" src="components/FilterLink.jsx"></script>
  <script type="text/jsx" src="components/Footer.jsx"></script>
  <script type="text/jsx" src="components/Todo.jsx"></script>
  <script type="text/jsx" src="components/TodoApp.jsx"></script>
  <script type="text/jsx" src="components/TodoList.jsx"></script>
  <script type="text/jsx" src="constants.jsx"></script>
  <script type="text/jsx" src="reducers/visibilityFilter.jsx"></script>
  <script type="text/jsx" src="reducers/todos.jsx"></script>

  <script type="text/jsx">
    const todoApp = Redux.combineReducers({
      visibilityFilter,
      todos
    });

    const store = Redux.createStore(todoApp);
    const dispatch = (action) => {
      store.dispatch(action);
      console.log('----------------') || displayInPreview('----------------');
      console.log('current state:') || displayInPreview('current state:');
      console.log(store.getState()) || displayInPreview(store.getState().visibilityFilter);
    }
    const render = () => {
      ReactDOM.render(
        <TodoApp
          {...store.getState()}
          dispatch={dispatch}
        />,
        document.getElementById('root')
      );
    }
    render();
    store.subscribe(render);
    console.log('current state:') || displayInPreview('current state:');
    console.log(store.getState()) || displayInPreview(store.getState().visibilityFilter);

    // display in plunker preview
    function displayInPreview(string) {
      var newDiv = document.createElement("div");
      var newContent = document.createTextNode(string);
      newDiv.appendChild(newContent);
      document.body.appendChild(newDiv)
    }

  </script>

</body>
</html>